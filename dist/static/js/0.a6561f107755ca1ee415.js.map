{"version":3,"sources":["webpack:///src/components/table.vue","webpack:///./src/components/table.vue?18be","webpack:///./src/components/table.vue","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js"],"names":["table","name","data","multipleSelectionAll","multipleSelection","idKey","tableData","pagination","totalRows","pageSize","pageSizes","pageNumber","layout","methods","handleChooseData","_this","this","changePageCoreRecordData","$alert","length","confirmButtonText","callback","action","alert","stringify_default","setSelectRow","selectAllIds","forEach","row","push","$refs","clearSelection","i","indexOf","toggleRowSelection","that","selectIds","noSelectIds","id","splice","currentChange","val","queryData","sizeChange","handleSelectionChange","_this2","max","personId","personName","telphone","idNo","linkType","setTimeout","getAllSelectionData","console","log","mounted","$nextTick","checkedData","components_table","render","_vm","_h","$createElement","_c","_self","staticStyle","float","attrs","type","size","on","click","_v","$event","$router","path","ref","selection-change","prop","label","page-size","current-page","page-sizes","total","current-change","size-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","default","__esModule","core","$JSON","JSON","stringify","it","apply","arguments"],"mappings":"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","file":"static/js/0.a6561f107755ca1ee415.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-button style=\"float:left;\" type=\"primary\" size=\"small\" @click=\"handleChooseData\">获取选中的内容</el-button>\r\n    <el-button style=\"float:left;\" type=\"primary\" size=\"small\" @click=\"$router.push({path: '/choose'})\">组件弹窗选择</el-button>\r\n    <el-table :data=\"tableData\" ref=\"table\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\"></el-table-column>\r\n      <el-table-column prop=\"personName\" label=\"客户名称\"></el-table-column>\r\n      <el-table-column prop=\"telphone\" label=\"手机号\"></el-table-column>\r\n      <el-table-column prop=\"idNo\" label=\"身份证号\"></el-table-column>\r\n      <el-table-column prop=\"linkType\" label=\"客户身份\"></el-table-column>\r\n    </el-table>\r\n    <el-pagination :page-size=\"pagination.pageSize\" @current-change=\"currentChange\"\r\n                            :current-page=\"pagination.pageNumber\"\r\n                            :page-sizes=\"pagination.pageSizes\"\r\n                            :total=\"pagination.totalRows\"\r\n                            :layout=\"pagination.layout\"\r\n                            @size-change='sizeChange'>\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"hello-talbe\",\r\n  data() {\r\n    return {\r\n      multipleSelectionAll: [], // 所有选中的数据包含跨页数据\r\n      multipleSelection: [], // 当前页选中的数据\r\n      idKey: \"personId\", // 标识列表数据中每一行的唯一键的名称(需要按自己的数据改一下)\r\n      tableData: [], // 表格数据\r\n      pagination: {\r\n        totalRows: 0, //总条数\r\n        pageSize: 10, //每页显示条数\r\n        pageSizes: [10, 20, 50],\r\n        pageNumber: 1,\r\n        layout: \"total, sizes, prev, pager, next, jumper\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    handleChooseData () {\r\n      // 获取之前需要执行一遍记忆分页处理\r\n      this.changePageCoreRecordData();\r\n       this.$alert(`选中条数为:${this.multipleSelectionAll.length}`, '提示', { confirmButtonText: '确定',\r\n          callback: action => {\r\n            alert(JSON.stringify(this.multipleSelectionAll));\r\n          }\r\n        });\r\n    },\r\n    // 设置选中的方法\r\n    setSelectRow() {\r\n      if (!this.multipleSelectionAll || this.multipleSelectionAll.length <= 0) {\r\n        return;\r\n      }\r\n      // 标识当前行的唯一键的名称\r\n      let idKey = this.idKey;\r\n      let selectAllIds = [];\r\n      let that = this;\r\n      this.multipleSelectionAll.forEach(row => {\r\n        selectAllIds.push(row[idKey]);\r\n      });\r\n      this.$refs.table.clearSelection();\r\n      for (var i = 0; i < this.tableData.length; i++) {\r\n        if (selectAllIds.indexOf(this.tableData[i][idKey]) >= 0) {\r\n          // 设置选中，记住table组件需要使用ref=\"table\"\r\n          this.$refs.table.toggleRowSelection(this.tableData[i], true);\r\n        }\r\n      }\r\n    },\r\n    // 记忆选择核心方法\r\n    changePageCoreRecordData() {\r\n      // 标识当前行的唯一键的名称\r\n      let idKey = this.idKey;\r\n      let that = this;\r\n      // 如果总记忆中还没有选择的数据，那么就直接取当前页选中的数据，不需要后面一系列计算\r\n      if (this.multipleSelectionAll.length <= 0) {\r\n        this.multipleSelectionAll = this.multipleSelection;\r\n        return;\r\n      }\r\n      // 总选择里面的key集合\r\n      let selectAllIds = [];\r\n      this.multipleSelectionAll.forEach(row => {\r\n        selectAllIds.push(row[idKey]);\r\n      });\r\n      let selectIds = [];\r\n      // 获取当前页选中的id\r\n      this.multipleSelection.forEach(row => {\r\n        selectIds.push(row[idKey]);\r\n        // 如果总选择里面不包含当前页选中的数据，那么就加入到总选择集合里\r\n        if (selectAllIds.indexOf(row[idKey]) < 0) {\r\n          that.multipleSelectionAll.push(row);\r\n        }\r\n      });\r\n      let noSelectIds = [];\r\n      // 得到当前页没有选中的id\r\n      this.tableData.forEach(row => {\r\n        if (selectIds.indexOf(row[idKey]) < 0) {\r\n          noSelectIds.push(row[idKey]);\r\n        }\r\n      });\r\n      noSelectIds.forEach(id => {\r\n        if (selectAllIds.indexOf(id) >= 0) {\r\n          for (let i = 0; i < that.multipleSelectionAll.length; i++) {\r\n            if (that.multipleSelectionAll[i][idKey] == id) {\r\n              // 如果总选择中有未被选中的，那么就删除这条\r\n              that.multipleSelectionAll.splice(i, 1);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    currentChange(val) {\r\n      // 改变页的时候调用一次\r\n      this.changePageCoreRecordData();\r\n      this.pagination.pageNumber = val;\r\n      this.queryData();\r\n    },\r\n    sizeChange(val) {\r\n      // 改变每页显示条数的时候调用一次\r\n      this.changePageCoreRecordData();\r\n      this.pagination.pageSize = val;\r\n      this.queryData();\r\n    },\r\n    handleSelectionChange(val) {\r\n      // table组件选中事件,记得加上@selection-change=\"handleSelectionChange\"\r\n      this.multipleSelection = val;\r\n    },\r\n    queryData() {\r\n      // start-----模拟动态分页\r\n      this.tableData = []\r\n      this.pagination.totalRows = 100\r\n      let i = (this.pagination.pageNumber - 1) * this.pagination.pageSize + 1\r\n      let max = this.pagination.pageNumber * this.pagination.pageSize\r\n      for (; i <= max; i ++) {\r\n        this.tableData.push( { personId: i, personName: '小明同志'+i, telphone: '137000000'+i, idNo: i + '10212000000000011', linkType: '业主' })\r\n      }\r\n      // end------模拟动态分页\r\n      setTimeout(() => {\r\n        this.setSelectRow();\r\n      }, 20);\r\n    }, // 得到选中的所有数据\r\n    getAllSelectionData() {\r\n      // 再执行一次记忆勾选数据匹配，目的是为了在当前页操作勾选后直接获取选中数据\r\n      this.changePageCoreRecordData();\r\n      console.log(this.multipleSelectionAll);\r\n    }\r\n  },\r\n  mounted: function() {\r\n    this.$nextTick(function () {\r\n          // 初始化渲染\r\n          this.pagination.pageNumber = 1\r\n          this.queryData()\r\n          // 模拟弹窗初始化选中一条\r\n          this.checkedData = [{personId:1}]\r\n     })\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\nh1,\r\nh2 {\r\n  font-weight: normal;\r\n}\r\nul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  display: inline-block;\r\n  margin: 0 10px;\r\n}\r\na {\r\n  color: #42b983;\r\n}\r\n.el-pagination {\r\n    background: none;\r\n    text-align: right;\r\n    margin-top: 10px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/table.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{staticStyle:{\"float\":\"left\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleChooseData}},[_vm._v(\"获取选中的内容\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"left\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.$router.push({path: '/choose'})}}},[_vm._v(\"组件弹窗选择\")]),_vm._v(\" \"),_c('el-table',{ref:\"table\",attrs:{\"data\":_vm.tableData},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"personName\",\"label\":\"客户名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"telphone\",\"label\":\"手机号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"idNo\",\"label\":\"身份证号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"linkType\",\"label\":\"客户身份\"}})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"page-size\":_vm.pagination.pageSize,\"current-page\":_vm.pagination.pageNumber,\"page-sizes\":_vm.pagination.pageSizes,\"total\":_vm.pagination.totalRows,\"layout\":_vm.pagination.layout},on:{\"current-change\":_vm.currentChange,\"size-change\":_vm.sizeChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c820cb92\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/table.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c820cb92\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./table.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./table.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./table.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c820cb92\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./table.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c820cb92\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/table.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 0 1","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 0 1"],"sourceRoot":""}